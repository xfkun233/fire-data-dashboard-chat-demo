# 文档内容整理（Markdown 格式）

以下内容基于个人主观理解，不一定完全准确，需批判性阅读。

## 一、唐同学的问题

唐同学核心诉求：传感器可能存在位置不准确、无法正常运转，数据显示完整性存疑；需引入 AI 大模型实现火灾走势实时预测与智能分析，但不清楚如何在网站中接入 AI 大模型。

### 1. 传感器位置不准确的理解

对 “传感器位置不准确” 的定义存疑，个人认知中传感器安装后位置固定，核心是通过**ID 区分传感器归属**即可。例如：



*   设定 ID 为 1 的传感器对应 “厕所” 安装位置，后续接收 ID:1 的传感器数据时，即可明确数据来源为厕所。

### 2. 前端网页建设建议：优先打造 “视觉炫酷” 的展示效果

无论后台逻辑多么复杂，最终面向用户 / 客户的核心是前端页面。结合本人过往经验，建议：



*   **核心原则**：将简单功能包装成 “科技感强、复杂度高” 的视觉效果，无需追求功能尽善，但需做到 “视觉尽美”（如数字孪生、动态传感器信息，咱就是说数据都不一定要是真的，中间可以加入一点微操嘛）。

#### （1）Demo 参考



*   技术栈：Vue 编写，通过 Github Action 构建并部署至 Github Pages（需注意网络环境）。

*   Demo 地址：[Vite App](https://xfkun233.github.io/fire-data-dashboard-chat-demo/#/)（注：Demo 为快速搭建，审美较基础，仅作效果参考）。

#### （2）图表可视化工具推荐



| 工具名称      | 特点         | 参考资源                                                               |
| --------- | ---------- | ------------------------------------------------------------------ |
| Echart.js | 功能丰富、社区案例多 | [makeapie echarts 社区图表可视化案例](https://www.makeapie.com/)（代码可直接复制修改） |
| Chart.js  | 轻量、易上手     | 适合对文档理解门槛要求低的场景                                                    |
| Plotly.js | 支持交互式图表    | 适合需要用户交互的场景                                                        |

### 3. AI 大模型接入方案：本质是 “API 接口调用”

以**火山引擎 AI 大模型**为例（优势：付费低、速度快、质量高、无需显卡），接入步骤如下：

#### （1）前期准备：获取 API 关键参数



1.  注册并认证：打开[火山引擎](https://www.volcengine.com/)，完成账号注册与实名认证。

2.  获取 API Key：

*   进入[API Key 管理](https://console.volcengine.com/ark/region:ark+cn-beijing/apiKey)页面；

*   点击 “创建 API Key”，输入名称后确认；

*   在 API Key 列表中，点击 “小眼睛” 图标显示密钥，复制保存。

1.  开通模型服务：

*   进入[开通管理](https://console.volcengine.com/ark/region:ark+cn-beijing/openManagement)页面；

*   在模型列表中找到 “DeepSeek-V3.1” 并开通（或点击 “一键开通所有模型”）。

1.  充值（可选）：

*   进入[费用中心](https://console.volcengine.com/finance/fund/recharge)页面；

*   按需充值，平台默认赠送 100 万 tokens，仅用于聊天场景够你用到天荒地老。

完成以上步骤后，将获得 3 个关键参数：



*   API Key：用户个人密钥（需替换占位符）；

*   接口地址：`https://ark.cn-beijing.volces.com/api/v3/chat/completions`；

*   模型名称：`deepseek-v3-1-250821`。

#### （2）API 调用测试：通过 CMD 执行 curl 命令

打开 CMD，输入以下命令（需将`{你的API Key}`替换为实际密钥）：



```


\# AI模型API调用命令

curl -X POST "https://ark.cn-beijing.volces.com/api/v3/chat/completions" -H "Authorization: Bearer {这里去掉花括号并改成你的api key}" -H "Content-Type: application/json" -d "{\"model\": \" deepseek-v3-1-250821\", \"messages\": [ {\"role\": \"user\", \"content\": \"你好？\"} ]}"
```

##### 示例输出（成功调用）：

![1.png](https://s2.loli.net/2025/09/15/FXYsA78ZGoiIhg5.png)





*   关键返回字段：


    *   `content`：AI 模型的最终回复内容；

    *   `reasoning_content`：AI 模型的思考过程（可选参考）。

#### （3）代码封装：后端 / 前端实现

##### ① 后端封装（推荐）

参考火山引擎官方文档：[深度思考 -- 火山方舟大模型服务平台 - 火山引擎](火山引擎官方文档链接)，平台提供多语言 SDK（如 Python、Java），调用便捷。

##### ② 纯前端实现（支持流式请求）

参考 Demo 项目代码：[fire-data-dashboard-chat-demo/src/services/deepseek.js](https://github.com/xfkun233/fire-data-dashboard-chat-demo/blob/main/src/services/deepseek.js)，核心是`streamChat`方法，支持**Server-Sent Events（SSE）** 实时数据流。

`streamChat`方法核心逻辑：



*   作用：发送流式聊天请求，实时接收数据流并触发回调；

*   技术细节：用`TextDecoder`和`Reader`处理流式响应；

*   回调函数：


    *   `onChunk`：实时处理每个数据块（如逐字显示 AI 回复）；

    *   `onThinkingChunk`：处理 AI 思考过程（可选）；

    *   `onComplete`：请求完成时触发（如显示 “回复结束”）；

*   请求头配置：`Accept: text/event-stream`（启用 SSE）。

#### （4）AI 大模型落地：结合火灾场景的 “提示词工程（Prompt Engineering）”

接入模型后，需通过**提示词设计**让 AI 理解 “火灾走势预测”“智能分析” 需求，核心是 “传感器数据 + 预置提示词” 拼接后传给模型。

##### ① 提示词工程核心目标



1.  优化模型的回答质量：通过调整提示词，使得模型能理解用户的意图并生成更高质量的输出；

2.  提高效率：通过有效的提示词，减少不必要的计算和时间消耗，提高模型响应速度；

3.  减少不必要的错误或偏差：设计提示词来避免模型给出错误的、无关的或有偏见的答案。

##### ② 提示词设计示例



| 设计原则    | 反面示例（模糊）  | 正面示例（清晰）                                            |
| ------- | --------- | --------------------------------------------------- |
| 清晰简洁    | 告诉我火灾相关信息 | 基于传感器数据（温度 68.2℃、烟雾 85%、火焰检测为 true），分析当前火灾风险等级及处置建议 |
| 指定输出格式  | 列出火灾处置步骤  | 用 “1. 风险等级 2. 处置建议（按优先级） 3. 监控重点” 的结构输出，每个部分配要点列表   |
| 提供上下文角色 | 分析火灾数据    | 你是消防安全与应急处置专家，基于以下传感器数据（附具体数据），生成结构化消防安全建议          |

##### ③ 实际落地参考（Demo 内置功能）

Demo 中已实现 “AI 智能分析按钮”，点击后自动拼接传感器数据与预置提示词，输出结构化建议（示例如下）：



![2.png](https://s2.loli.net/2025/09/15/Wh54CPTDN1Ur7IY.png)


## 二、王同学的问题

王同学核心诉求：尚未拿到传感器，实际测试可能与理想状态不符；服务器 IP 待完善，当前用`http://your-server.com/api/data`临时替代。

个人看法：以上问题多为客观条件限制（如硬件未到位、IP 未确定），暂无法提供具体技术建议，建议后续提出可通过技术方案解决的问题。

## 三、吉克小飞（网名？）同学的问题

吉克小飞同学核心诉求：代码验证正确，但上传至开发板时持续报错；已排查常见问题，仍未解决；同时不清楚传感器 DATA 接口与开发板 GPIO 接口的对应关系，无法接线。

### 1. 代码上传至开发板报错：排查思路

因为没有提供报错信息，所以我也只能给出排查方向：**代码、电脑、开发板**三者之一存在问题，通过 “简单代码验证法” 定位问题。

#### （1）验证代码（Arduino 示例）

上传以下简单 LED 闪烁代码，观察开发板是否正常响应：



```
void setup() {

&#x20; // 初始化D14引脚为输出模式

&#x20; pinMode(14, OUTPUT);

}

void loop() {

&#x20; digitalWrite(14, HIGH);  // 点亮LED

&#x20; delay(1000);             // 等待1秒

&#x20; digitalWrite(14, LOW);   // 熄灭LED

&#x20; delay(1000);             // 等待1秒

}
```



*   预期效果：开发板 LED 每隔 1 秒闪烁一次（红光）；

*   结果判断：

1.  若正常闪烁：说明电脑、开发板硬件无问题，**原代码存在逻辑错误**，需重构；

2.  若仍报错：进一步排查开发板类型（如廉价 ESP32 需手动按 Boot 键上传）。

#### （2）开发板类型特殊注意点

若使用拼多多等平台购买的**廉价 ESP32 开发板**（非 Arduino Nano ESP32），上传代码时需**手动按住 Boot 键**，直至上传进度开始后再松开。

### 2. 传感器 DATA 接口与开发板 GPIO 接口接线：先 “识别 GPIO” 再接线

#### （1）官方文档参考

优先查阅开发板官方文档，以 Arduino Nano ESP32 为例，文档地址：[Nano ESP32 | Arduino Documentation](https://docs.arduino.cc/hardware/nano-esp32/)。

#### （2）GPIO 引脚图与对应关系（以 Nano ESP32 为例）



![3.png](https://s2.loli.net/2025/09/15/Qms2pUKhlPHX1If.png)

关键引脚对应说明（结合注释接线需求）：



*   注释要求接 “数字 3、4 号引脚”：先尝试接开发板标注的`D3`、`D4`；若无反应，替换为`GPIO03`、`GPIO04`；

*   模拟输入引脚`A0`：对应`GPIO01`；

*   供电问题：若开发板无 5V 接口，可从`VBUS`引脚取电（VBUS 直通 USB 供电，输出 5V 电压）。

#### （3）接线建议



1.  先对照官方引脚图确认 GPIO 编号，避免接错电源或接地引脚；

2.  接线后先测试简单功能（如传感器数据读取），无反应则逐步更换 GPIO 引脚尝试；

3.  若传感器为数字信号类型，优先选择标注 “D + 数字编号” 的 GPIO（如 D3、D4）；若为模拟信号，选择 “A + 模拟编号” 的 GPIO（如 A0）。
